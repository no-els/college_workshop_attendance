<template>
  <div class="attendee-table-container">
    <template if:true={isLoading}>
      <lightning-spinner alternative-text="Loading..." size="medium"></lightning-spinner>
    </template>

    <template if:false={isLoading}>
      <table class="slds-table slds-table_bordered slds-table_cell-buffer">
        <thead>
          <tr class="slds-text-title_caps">
            <th scope="col">Attendee Name</th>
            <template if:true={showPPP}>
              <th scope="col">Site 1</th>
              <th scope="col">Site 2</th>
              <th scope="col">Phone</th>
            </template>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          <template for:each={contacts} for:item="pattendee">
            <tr key={pattendee.Id}>
              <td>{pattendee.Name}</td>
              <template if:true={showPPP}>
                <td>{pattendee.Site__c}</td>
                <td>{pattendee.Site_2__c}</td>
                <td>{pattendee.Phone}</td>
              </template>
              <td>
                <lightning-button 
                  label="Select" 
                  variant="brand" 
                  data-id={pattendee.Id} 
                  onclick={handleClick}>
                </lightning-button>
              </td>
            </tr>
          </template>
        </tbody>
      </table>
    </template>
  </div>
</template>